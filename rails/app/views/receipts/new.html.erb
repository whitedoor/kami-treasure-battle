<div class="ktb-page">
  <div class="ktb-note" style="max-width: 720px;">
    <div style="font-weight: 700; margin-bottom: 8px;">レシート撮影 → GCSアップロード（開発検証）</div>
    <div style="opacity: 0.9;">
      モバイルでは「カメラ起動」になります（<code>capture</code>）。PCでは画像ファイル選択になります。
    </div>
    <div style="opacity: 0.9; margin-top: 6px;">
      画像アップロード後に Gemini API で抽出します（サーバ側に <code>GEMINI_API_KEY</code> の設定が必要）。
    </div>
  </div>

  <div
    data-controller="receipt-upload"
    style="max-width: 720px; width: 100%; margin-top: 16px;"
  >
    <label class="ktb-pill" style="display: inline-block; cursor: pointer;">
      写真を選ぶ / 撮る
      <input
        type="file"
        accept="image/*"
        capture="environment"
        data-receipt-upload-target="file"
        style="display:none;"
      >
    </label>

    <button
      type="button"
      class="ktb-pill"
      data-receipt-upload-target="submit"
      data-action="click->receipt-upload#submit"
      disabled
      style="margin-left: 8px;"
    >
      アップロード開始
    </button>

    <div data-receipt-upload-target="status" style="margin-top: 12px;"></div>

    <div style="margin-top: 12px;">
      <div style="font-weight: 700; margin-bottom: 6px;">プレビュー</div>
      <img
        data-receipt-upload-target="preview"
        alt="preview"
        style="display:none; width: 100%; max-height: 420px; object-fit: contain; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12);"
      >
    </div>

    <div style="margin-top: 12px;">
      <div style="font-weight: 700; margin-bottom: 6px;">アップロード結果</div>
      <pre
        data-receipt-upload-target="result"
        style="white-space: pre-wrap; word-break: break-word; margin: 0; padding: 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.12);"
      ></pre>
      <div data-receipt-upload-target="permalink" style="margin-top: 8px;"></div>
    </div>
  </div>
</div>

